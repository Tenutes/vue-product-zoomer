"use strict";(self.webpackChunkvue_product_zoomer=self.webpackChunkvue_product_zoomer||[]).push([[788],{82:(e,t,i)=>{i.d(t,{Z:()=>p});const s="object"==typeof HTMLElement;function n(e){return s?e instanceof HTMLElement:e&&"object"==typeof e&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName}function o(e,t){t.forEach((function(t){e.classList.add(t)}))}function h(e,t){t.forEach((function(t){e.classList.remove(t)}))}function l(){throw new Error("Missing parameter")}let a=function(){let e;return t=>(t&&(e=t),e)}();class r{constructor(e){if(a())return a();this.isShowing=!1;let{namespace:t=null,zoomFactor:i=l(),containerEl:s=l()}=e;this.settings={namespace:t,zoomFactor:i,containerEl:s},this.openClasses=this._buildClasses("open"),this._buildElement(),a(this)}_buildClasses(e){let t=[`drift-${e}`],i=this.settings.namespace;return i&&t.push(`${i}-${e}`),t}_buildElement(){this.el=this.el?this.el:document.createElement("div"),o(this.el,this._buildClasses("bounding-box"))}show(e,t){this.isShowing=!0,document.querySelector("body").appendChild(this.el);let i=this.el.style;i.width=`${Math.round(e/this.settings.zoomFactor)}px`,i.height=`${Math.round(t/this.settings.zoomFactor)}px`,o(this.el,this.openClasses)}hide(){this.isShowing&&document.querySelector("body").removeChild(this.el),this.isShowing=!1,h(this.el,this.openClasses)}setPosition(e,t,i){let s=window.pageXOffset,n=window.pageYOffset,o=i.left+e*i.width-this.el.clientWidth/2+s,h=i.top+t*i.height-this.el.clientHeight/2+n;o<i.left+s?o=i.left+s:o+this.el.clientWidth>i.left+i.width+s&&(o=i.left+i.width-this.el.clientWidth+s),h<i.top+n?h=i.top+n:h+this.el.clientHeight>i.top+i.height+n&&(h=i.top+i.height-this.el.clientHeight+n),this.el.style.left=`${o}px`,this.el.style.top=`${h}px`}}class d{constructor(e={}){let{el:t=l(),zoomPane:i=l(),sourceAttribute:s=l(),handleTouch:n=l(),onShow:o=null,onHide:h=null,hoverDelay:a=0,touchDelay:d=0,hoverBoundingBox:c=l(),touchBoundingBox:g=l(),namespace:m=null,zoomFactor:u=l()}=e;this.settings={el:t,zoomPane:i,sourceAttribute:s,handleTouch:n,onShow:o,onHide:h,hoverDelay:a,touchDelay:d,hoverBoundingBox:c,touchBoundingBox:g,namespace:m,zoomFactor:u},(this.settings.hoverBoundingBox||this.settings.touchBoundingBox)&&(this.boundingBox=new r({namespace:this.settings.namespace,zoomFactor:this.settings.zoomFactor,containerEl:this.settings.el.offsetParent})),this.enabled=!0,this._bindEvents()}get isShowing(){return this.settings.zoomPane.isShowing}_bindEvents(){this.settings.el.addEventListener("mouseenter",this._handleEntry,!1),this.settings.el.addEventListener("mouseleave",this._hide,!1),this.settings.el.addEventListener("mousemove",this._handleMovement,!1),this.settings.handleTouch&&(this.settings.el.addEventListener("touchstart",this._handleEntry,!1),this.settings.el.addEventListener("touchend",this._hide,!1),this.settings.el.addEventListener("touchmove",this._handleMovement,!1))}_unbindEvents(){this.settings.el.removeEventListener("mouseenter",this._handleEntry,!1),this.settings.el.removeEventListener("mouseleave",this._hide,!1),this.settings.el.removeEventListener("mousemove",this._handleMovement,!1),this.settings.handleTouch&&(this.settings.el.removeEventListener("touchstart",this._handleEntry,!1),this.settings.el.removeEventListener("touchend",this._hide,!1),this.settings.el.removeEventListener("touchmove",this._handleMovement,!1))}_handleEntry=e=>{e.preventDefault(),this._lastMovement=e,"mouseenter"==e.type&&this.settings.hoverDelay?this.entryTimeout=setTimeout(this._show,this.settings.hoverDelay):this.settings.touchDelay?this.entryTimeout=setTimeout(this._show,this.settings.touchDelay):this._show()};_show=()=>{if(!this.enabled)return;let e=this.settings.onShow;if(e&&"function"==typeof e&&e(),this.settings.zoomPane.show(this.settings.el.getAttribute(this.settings.sourceAttribute),this.settings.el.clientWidth,this.settings.el.clientHeight),this._lastMovement){let e=this._lastMovement.touches;(e&&this.settings.touchBoundingBox||!e&&this.settings.hoverBoundingBox)&&this.boundingBox.show(this.settings.zoomPane.el.clientWidth,this.settings.zoomPane.el.clientHeight)}this._handleMovement()};_hide=e=>{e.preventDefault(),this._lastMovement=null,this.entryTimeout&&clearTimeout(this.entryTimeout),this.boundingBox&&this.boundingBox.hide();let t=this.settings.onHide;t&&"function"==typeof t&&t(),this.settings.zoomPane.hide()};_handleMovement=e=>{if(e)e.preventDefault(),this._lastMovement=e;else{if(!this._lastMovement)return;e=this._lastMovement}let t,i;if(e.touches){let s=e.touches[0];t=s.clientX,i=s.clientY}else t=e.clientX,i=e.clientY;let s=this.settings.el.getBoundingClientRect(),n=t-s.left,o=i-s.top,h=n/this.settings.el.clientWidth,l=o/this.settings.el.clientHeight;this.boundingBox&&this.boundingBox.setPosition(h,l,s),this.settings.zoomPane.setPosition(h,l,s)}}var c=document.createElement("div").style;const g="undefined"!=typeof document&&("animation"in c||"webkitAnimation"in c);let m=function(){let e;return t=>(t&&(e=t),e)}();class u{constructor(e={}){this.isShowing=!1;let{container:t=null,zoomFactor:i=l(),inline:s=l(),namespace:n=null,showWhitespaceAtEdges:o=l(),containInline:h=l(),inlineOffsetX:a=0,inlineOffsetY:r=0,inlineContainer:d=document.body}=e;this.settings={container:t,zoomFactor:i,inline:s,namespace:n,showWhitespaceAtEdges:o,containInline:h,inlineOffsetX:a,inlineOffsetY:r,inlineContainer:d},this.openClasses=this._buildClasses("open"),this.openingClasses=this._buildClasses("opening"),this.closingClasses=this._buildClasses("closing"),this.inlineClasses=this._buildClasses("inline"),this.loadingClasses=this._buildClasses("loading"),this._buildElement(),m(this)}_buildClasses(e){let t=[`drift-${e}`],i=this.settings.namespace;return i&&t.push(`${i}-${e}`),t}_buildElement(){this.el=document.createElement("div"),o(this.el,this._buildClasses("zoom-pane"));let e=document.createElement("div");o(e,this._buildClasses("zoom-pane-loader")),this.el.appendChild(e),this.imgEl=document.createElement("img"),this.el.appendChild(this.imgEl)}_setImageURL(e){this.imgEl.setAttribute("src",e)}_setImageSize(e,t){this.imgEl.style.width=e*this.settings.zoomFactor+"px",this.imgEl.style.height=t*this.settings.zoomFactor+"px"}setPosition(e,t,i){let s=-(this.imgEl.clientWidth*e-this.el.clientWidth/2),n=-(this.imgEl.clientHeight*t-this.el.clientHeight/2),o=-(this.imgEl.clientWidth-this.el.clientWidth),h=-(this.imgEl.clientHeight-this.el.clientHeight);if(this.el.parentElement===this.settings.inlineContainer){let s=window.pageXOffset,n=window.pageYOffset,o=i.left+e*i.width-this.el.clientWidth/2+this.settings.inlineOffsetX+s,h=i.top+t*i.height-this.el.clientHeight/2+this.settings.inlineOffsetY+n;this.settings.containInline&&(o<i.left+s?o=i.left+s:o+this.el.clientWidth>i.left+i.width+s&&(o=i.left+i.width-this.el.clientWidth+s),h<i.top+n?h=i.top+n:h+this.el.clientHeight>i.top+i.height+n&&(h=i.top+i.height-this.el.clientHeight+n)),this.el.style.left=`${o}px`,this.el.style.top=`${h}px`}this.settings.showWhitespaceAtEdges||(s>0?s=0:s<o&&(s=o),n>0?n=0:n<h&&(n=h)),this.imgEl.style.transform=`translate(${s}px, ${n}px)`,this.imgEl.style.webkitTransform=`translate(${s}px, ${n}px)`}get _isInline(){let e=this.settings.inline;return!0===e||"number"==typeof e&&window.innerWidth<=e}_removeListenersAndResetClasses(){this.el.removeEventListener("animationend",this._completeShow,!1),this.el.removeEventListener("animationend",this._completeHide,!1),this.el.removeEventListener("webkitAnimationEnd",this._completeShow,!1),this.el.removeEventListener("webkitAnimationEnd",this._completeHide,!1),h(this.el,this.openClasses),h(this.el,this.closingClasses)}show(e,t,i){this._removeListenersAndResetClasses(),this.isShowing=!0,o(this.el,this.openClasses),o(this.el,this.loadingClasses),this.imgEl.addEventListener("load",this._handleLoad,!1),this._setImageURL(e),this._setImageSize(t,i),this._isInline?this._showInline():this._showInContainer(),g&&(this.el.addEventListener("animationend",this._completeShow,!1),this.el.addEventListener("webkitAnimationEnd",this._completeShow,!1),o(this.el,this.openingClasses))}_showInline(){this.settings.inlineContainer.appendChild(this.el),o(this.el,this.inlineClasses)}_showInContainer(){this.settings.container.style.display="block",this.settings.container.appendChild(this.el)}hide(){this._removeListenersAndResetClasses(),this.isShowing=!1,g?(this.el.addEventListener("animationend",this._completeHide,!1),this.el.addEventListener("webkitAnimationEnd",this._completeHide,!1),o(this.el,this.closingClasses)):(h(this.el,this.openClasses),h(this.el,this.inlineClasses))}_completeShow=()=>{this.el.removeEventListener("animationend",this._completeShow,!1),this.el.removeEventListener("webkitAnimationEnd",this._completeShow,!1),h(this.el,this.openingClasses)};_completeHide=()=>{this.el.removeEventListener("animationend",this._completeHide,!1),this.el.removeEventListener("webkitAnimationEnd",this._completeHide,!1),h(this.el,this.openClasses),h(this.el,this.closingClasses),h(this.el,this.inlineClasses),this.el.setAttribute("style",""),this.el.parentElement===this.settings.container?this.settings.container.removeChild(this.el):this.el.parentElement===this.settings.inlineContainer&&this.settings.inlineContainer.removeChild(this.el),!0!==this.settings.inline&&(this.settings.container.style.display="none")};_handleLoad=()=>{this.imgEl.removeEventListener("load",this._handleLoad,!1),h(this.el,this.loadingClasses)}}class p{constructor(e,t={}){if(this.triggerEl=e,!n(this.triggerEl))throw new TypeError("`new Drift` requires a DOM element as its first argument.");let{namespace:i=null,showWhitespaceAtEdges:s=!1,containInline:o=!1,inlineOffsetX:h=0,inlineOffsetY:l=0,inlineContainer:a=document.body,sourceAttribute:r="data-zoom",zoomFactor:d=3,paneContainer:c=document.body,inlinePane:g=375,handleTouch:m=!0,onShow:u=null,onHide:p=null,injectBaseStyles:f=!0,hoverDelay:v=0,touchDelay:w=0,hoverBoundingBox:E=!1,touchBoundingBox:_=!1}=t;if(!0!==g&&!n(c))throw new TypeError("`paneContainer` must be a DOM element when `inlinePane !== true`");if(!n(a))throw new TypeError("`inlineContainer` must be a DOM element");this.settings={namespace:i,showWhitespaceAtEdges:s,containInline:o,inlineOffsetX:h,inlineOffsetY:l,inlineContainer:a,sourceAttribute:r,zoomFactor:d,paneContainer:c,inlinePane:g,handleTouch:m,onShow:u,onHide:p,injectBaseStyles:f,hoverDelay:v,touchDelay:w,hoverBoundingBox:E,touchBoundingBox:_},this.settings.injectBaseStyles&&function(){if(document.querySelector(".drift-base-styles"))return;let e=document.createElement("style");e.type="text/css",e.classList.add("drift-base-styles"),e.appendChild(document.createTextNode("\n@keyframes noop {\n  0% { zoom: 1; }\n}\n\n@-webkit-keyframes noop {\n  0% { zoom: 1; }\n}\n\n.drift-zoom-pane.drift-open {\n  display: block;\n}\n\n.drift-zoom-pane.drift-opening, .drift-zoom-pane.drift-closing {\n  animation: noop 1ms;\n  -webkit-animation: noop 1ms;\n}\n\n.drift-zoom-pane {\n  position: absolute;\n  overflow: hidden;\n  width: 100%;\n  height: 100%;\n  top: 0;\n  left: 0;\n  pointer-events: none;\n}\n\n.drift-zoom-pane-loader {\n  display: none;\n}\n\n.drift-zoom-pane img {\n  position: absolute;\n  display: block;\n  max-width: none;\n  max-height: none;\n}\n\n.drift-bounding-box {\n  position: absolute;\n  pointer-events: none;\n}\n"));let t=document.head;t.insertBefore(e,t.firstChild)}(),this._buildZoomPane(),this._buildTrigger()}get isShowing(){return this.zoomPane.isShowing}get zoomFactor(){return this.settings.zoomFactor}set zoomFactor(e){this.settings.zoomFactor=e,this.zoomPane.settings.zoomFactor=e}_buildZoomPane(){this.zoomPane=new u({container:this.settings.paneContainer,zoomFactor:this.settings.zoomFactor,showWhitespaceAtEdges:this.settings.showWhitespaceAtEdges,containInline:this.settings.containInline,inline:this.settings.inlinePane,namespace:this.settings.namespace,inlineOffsetX:this.settings.inlineOffsetX,inlineOffsetY:this.settings.inlineOffsetY,inlineContainer:this.settings.inlineContainer})}_buildTrigger(){this.trigger=new d({el:this.triggerEl,zoomPane:this.zoomPane,handleTouch:this.settings.handleTouch,onShow:this.settings.onShow,onHide:this.settings.onHide,sourceAttribute:this.settings.sourceAttribute,hoverDelay:this.settings.hoverDelay,touchDelay:this.settings.touchDelay,hoverBoundingBox:this.settings.hoverBoundingBox,touchBoundingBox:this.settings.touchBoundingBox,namespace:this.settings.namespace,zoomFactor:this.settings.zoomFactor})}setZoomImageURL(e){this.zoomPane._setImageURL(e)}disable(){this.trigger.enabled=!1}enable(){this.trigger.enabled=!0}destroy=()=>{this.trigger._unbindEvents()}}}}]);